{"version":3,"sources":["../../../../src/run/android/resolveOptions.ts"],"sourcesContent":["import { resolveDeviceAsync } from './resolveDevice';\nimport { GradleProps, resolveGradlePropsAsync } from './resolveGradlePropsAsync';\nimport { LaunchProps, resolveLaunchPropsAsync } from './resolveLaunchProps';\nimport { AndroidDeviceManager } from '../../start/platforms/android/AndroidDeviceManager';\nimport { BundlerProps, resolveBundlerPropsAsync } from '../resolveBundlerProps';\n\nexport type Options = {\n  variant?: string;\n  device?: boolean | string;\n  port?: number;\n  bundler?: boolean;\n  install?: boolean;\n  buildCache?: boolean;\n  allArch?: boolean;\n  binary?: string;\n  appId?: string;\n};\n\nexport type ResolvedOptions = GradleProps &\n  BundlerProps &\n  LaunchProps & {\n    variant: string;\n    buildCache: boolean;\n    device: AndroidDeviceManager;\n    install: boolean;\n    architectures?: string;\n    appId?: string;\n  };\n\nexport async function resolveOptionsAsync(\n  projectRoot: string,\n  options: Options\n): Promise<ResolvedOptions> {\n  // Resolve the device before the gradle props because we need the device to be running to get the ABI.\n  const device = await resolveDeviceAsync(options.device);\n\n  return {\n    ...(await resolveBundlerPropsAsync(projectRoot, options)),\n    ...(await resolveGradlePropsAsync(projectRoot, options, device.device)),\n    ...(await resolveLaunchPropsAsync(projectRoot, options)),\n    variant: options.variant ?? 'debug',\n    // Resolve the device based on the provided device id or prompt\n    // from a list of devices (connected or simulated) that are filtered by the scheme.\n    device,\n    buildCache: !!options.buildCache,\n    install: !!options.install,\n  };\n}\n"],"names":["resolveOptionsAsync","projectRoot","options","device","resolveDeviceAsync","resolveBundlerPropsAsync","resolveGradlePropsAsync","resolveLaunchPropsAsync","variant","buildCache","install"],"mappings":";;;;+BA6BsBA;;;eAAAA;;;+BA7Ba;yCACkB;oCACA;qCAEE;AAyBhD,eAAeA,oBACpBC,WAAmB,EACnBC,OAAgB;IAEhB,sGAAsG;IACtG,MAAMC,SAAS,MAAMC,IAAAA,iCAAkB,EAACF,QAAQC,MAAM;IAEtD,OAAO;QACL,GAAI,MAAME,IAAAA,6CAAwB,EAACJ,aAAaC,QAAQ;QACxD,GAAI,MAAMI,IAAAA,gDAAuB,EAACL,aAAaC,SAASC,OAAOA,MAAM,CAAC;QACtE,GAAI,MAAMI,IAAAA,2CAAuB,EAACN,aAAaC,QAAQ;QACvDM,SAASN,QAAQM,OAAO,IAAI;QAC5B,+DAA+D;QAC/D,mFAAmF;QACnFL;QACAM,YAAY,CAAC,CAACP,QAAQO,UAAU;QAChCC,SAAS,CAAC,CAACR,QAAQQ,OAAO;IAC5B;AACF"}